---
layout: manual_5.0
title: Processors
---

<h1>Processors</h1>

<ul class="toc">
  <li><a href="#Format%20Support">Format Support</a></li>
  <li><a href="#Selection%20Strategies">Selection Strategies</a></li>
  <li><a href="#Retrieval%20Strategies">Retrieval Strategies</a></li>
  <li><a href="#Supported%20Features">Supported Features</a></li>
  <li><a href="#Supported%20Source%20Formats">Supported Source Formats</a></li>
  <li><a href="#Implementations">Implementations</a>
    <ul>
      <li><a href="#Java2dProcessor">Java2dProcessor</a></li>
      <li><a href="#JaiProcessor">JaiProcessor</a></li>
      <li><a href="#GraphicsMagickProcessor">GraphicsMagickProcessor</a></li>
      <li><a href="#ImageMagickProcessor">ImageMagickProcessor</a></li>
      <li><a href="#TurboJpegProcessor">TurboJpegProcessor</a></li>
      <li><a href="#KakaduDemoProcessor">KakaduDemoProcessor</a></li>
      <li><a href="#KakaduNativeProcessor">KakaduNativeProcessor</a></li>
      <li><a href="#OpenJpegProcessor">OpenJpegProcessor</a></li>
      <li><a href="#FfmpegProcessor">FfmpegProcessor</a></li>
      <li><a href="#PdfBoxProcessor">PdfBoxProcessor</a></li>
    </ul>
  </li>
</ul>

<p>Processors read images from <a href="sources.html">sources</a>, decode them, transform them according to request arguments, and encode and write derivative images back to the client. Processors can be <a href="#Selection%20Strategies">selected in different ways</a> per-request.</p>

<p>Different processors use different underlying codecs and image processing engines, which may have different quality, compatibility, dependency, performance, and licensing characteristics. The ability to choose among different processors is intended to make it straightforward to add support for new image formats; improve support for existing image formats via the substitution of better codecs; and decouple the image server implementation from any one codec.</p>

<hr>

<h2 id="Format Support">Format Support</h2>

<p>Different processors support different source formats. A table of supported formats is displayed in the <a href="remote-management.html#Control%20Panel">Control Panel</a>, as well as in the <a href="#Supported%20Source%20Formats">Supported Source Formats</a> table below. A list of output formats supported <em>for a given source format</em> is contained within the response to an <a href="endpoints.html">information request</a> (such as <span class="filename">/iiif/2/:identifier/info.json</span>).</p>

<hr>

<h2 id="Selection Strategies">Selection Strategies</h2>

<p>The <code>processor.selection_strategy</code> configuration key controls how a processor is selected on a per-request basis.</p>

<dl>
  <dt><code>AutomaticSelectionStrategy</code></dt>
  <dd>A processor is chosen automatically based on the source format, installed dependencies, and potentially other criteria, with priority given to those that are expected to be more efficient.</dd>
  <dt><code>ManualSelectionStrategy</code></dt>
  <dd>A processor is chosen based on the <code>processor.ManualSelectionStrategy.{format}</code> and <code>processor.ManualSelectionStrategy.fallback</code> keys in the application configuration. This strategy offers more control, but requires knowing <a href="#Format%20Support">which processors support which source formats</a>, and may require testing different processors to find the one that best meets a given use case.</dd>
</dl>

<hr>

<h2 id="Retrieval Strategies">Retrieval Strategies</h2>

<p>Processors ultimately read images from <a href="sources.html">sources</a>, of which there are two main types: those that can supply files (FileSources), and those that can supply streams (StreamSources). Correspondingly, there are two types of processors: those that can read from files (FileProcessors), and those that can read from streams (StreamProcessors). These distinctions are important because they influence how data flows through the processing pipeline, which influences performance.</p>

<h3 id="Stream Retrieval Strategy">Stream Retrieval Strategy</h3>

<p>The stream retrieval strategy (<code>processor.stream_retrieval_strategy</code>) controls how content is fed to stream-based processors from stream-based sources.</p>

<dl>
  <dt><code>StreamStrategy</code></dt>
  <dd>Source images are streamed from a source when possible, and the <a href="#Fallback%20Retrieval%20Strategy">fallback retrieval strategy</a> is used otherwise.</dd>
  <dt><code>DownloadStrategy</code></dt>
  <dd>Source images are downloaded to temporary files and deleted upon request completion.</dd>
  <dt><code>CacheStrategy</code></dt>
  <dd>Source images are downloaded into the source cache using <a href="caching.html#FilesystemCache">FilesystemCache</a>, which must also be configured. This is significantly more efficient than <code>DownloadStrategy</code> if you can spare the disk space.</dd>
</dl>

<h3 id="Fallback Retrieval Strategy">Fallback Retrieval Strategy</h3>

<p>The fallback retrieval strategy (<code>processor.fallback_retrieval_strategy</code>) controls how an incompatible <code>StreamSource</code>/<code>FileProcessor</code> combination is dealt with.</p>

<dl>
  <dt><code>DownloadStrategy</code></dt>
  <dd>The source image is downloaded to a temporary file that the processor can read, and deleted after the request is complete.</dd>
  <dt><code>CacheStrategy</code></dt>
  <dd>The source image is downloaded into the source cache using <a href="caching.html#FilesystemCache">FilesystemCache</a>, which must also be configured. This is significantly more efficient than <code>DownloadStrategy</code> if you can spare the disk space.</dd>
  <dt><code>AbortStrategy</code></dt>
  <dd>The request fails.</dd>
</dl>

<hr>

<h2 id="Supported Features">Supported Features</h2>

<table class="table table-bordered">
  <tr>
    <th></th>
    <th><a href="#GraphicsMagickProcessor">GraphicsMagick</a></th>
    <th><a href="#ImageMagickProcessor">ImageMagick</a></th>
    <th><a href="#Java2dProcessor">Java 2D</a></th>
    <th><a href="#JaiProcessor">JAI</a></th>
    <th><a href="#KakaduDemoProcessor">Kakadu Demo</a></th>
    <th><a href="#KakaduNativeProcessor">Kakadu Native</a></th>
    <th><a href="#OpenJpegProcessor">OpenJPEG</a></th>
    <th><a href="#FfmpegProcessor">FFmpeg</a></th>
    <th><a href="#PdfBoxProcessor">PDFBox</a></th>
    <th><a href="#TurboJpegProcessor">TurboJPEG</a></th>
  </tr>
  <tr>
    <td>Reading from files</td>
    <td class="text-center bg-success">&check;</td>
    <td class="text-center bg-success">&check;</td>
    <td class="text-center bg-success">&check;</td>
    <td class="text-center bg-success">&check;</td>
    <td class="text-center bg-success">&check;</td>
    <td class="text-center bg-success">&check;</td>
    <td class="text-center bg-success">&check;</td>
    <td class="text-center bg-success">&check;</td>
    <td class="text-center bg-success">&check;</td>
    <td class="text-center bg-success">&check;</td>
  </tr>
  <tr>
    <td>Reading from sequential streams</td>
    <td class="text-center bg-success">&check;</td>
    <td class="text-center bg-success">&check;</td>
    <td class="text-center bg-success">&check;</td>
    <td class="text-center bg-success">&check;</td>
    <td class="text-center bg-danger">&times;</td>
    <td class="text-center bg-success">&check;</td>
    <td class="text-center bg-danger">&times;</td>
    <td class="text-center bg-danger">&times;</td>
    <td class="text-center bg-success">&check;</td>
    <td class="text-center bg-success">&check;</td>
  </tr>
  <tr>
    <td>Reading from seekable streams</td>
    <td class="text-center bg-danger">&times;</td>
    <td class="text-center bg-danger">&times;</td>
    <td class="text-center bg-success">&check;</td>
    <td class="text-center bg-success">&check;</td>
    <td class="text-center bg-danger">&times;</td>
    <td class="text-center bg-success">&check;</td>
    <td class="text-center bg-danger">&times;</td>
    <td class="text-center bg-danger">&times;</td>
    <td class="text-center bg-danger">&times;</td>
    <td class="text-center bg-danger">&times;</td>
  </tr>
  <tr>
    <td>Mirroring</td>
    <td class="text-center bg-success">&check;</td>
    <td class="text-center bg-success">&check;</td>
    <td class="text-center bg-success">&check;</td>
    <td class="text-center bg-success">&check;</td>
    <td class="text-center bg-success">&check;</td>
    <td class="text-center bg-success">&check;</td>
    <td class="text-center bg-success">&check;</td>
    <td class="text-center bg-success">&check;</td>
    <td class="text-center bg-success">&check;</td>
    <td class="text-center bg-success">&check;</td>
  </tr>
  <tr>
    <td>Region by percent</td>
    <td class="text-center bg-success">&check;</td>
    <td class="text-center bg-success">&check;</td>
    <td class="text-center bg-success">&check;</td>
    <td class="text-center bg-success">&check;</td>
    <td class="text-center bg-success">&check;</td>
    <td class="text-center bg-success">&check;</td>
    <td class="text-center bg-success">&check;</td>
    <td class="text-center bg-success">&check;</td>
    <td class="text-center bg-success">&check;</td>
    <td class="text-center bg-success">&check;</td>
  </tr>
  <tr>
    <td>Region by pixels</td>
    <td class="text-center bg-success">&check;</td>
    <td class="text-center bg-success">&check;</td>
    <td class="text-center bg-success">&check;</td>
    <td class="text-center bg-success">&check;</td>
    <td class="text-center bg-success">&check;</td>
    <td class="text-center bg-success">&check;</td>
    <td class="text-center bg-success">&check;</td>
    <td class="text-center bg-success">&check;</td>
    <td class="text-center bg-success">&check;</td>
    <td class="text-center bg-success">&check;</td>
  </tr>
  <tr>
    <td>Square region</td>
    <td class="text-center bg-success">&check;</td>
    <td class="text-center bg-success">&check;</td>
    <td class="text-center bg-success">&check;</td>
    <td class="text-center bg-success">&check;</td>
    <td class="text-center bg-success">&check;</td>
    <td class="text-center bg-success">&check;</td>
    <td class="text-center bg-success">&check;</td>
    <td class="text-center bg-success">&check;</td>
    <td class="text-center bg-success">&check;</td>
    <td class="text-center bg-success">&check;</td>
  </tr>
  <tr>
    <td>Right-angle rotation</td>
    <td class="text-center bg-success">&check;</td>
    <td class="text-center bg-success">&check;</td>
    <td class="text-center bg-success">&check;</td>
    <td class="text-center bg-success">&check;</td>
    <td class="text-center bg-success">&check;</td>
    <td class="text-center bg-success">&check;</td>
    <td class="text-center bg-success">&check;</td>
    <td class="text-center bg-success">&check;</td>
    <td class="text-center bg-success">&check;</td>
    <td class="text-center bg-success">&check;</td>
  </tr>
  <tr>
    <td>Arbitrary rotation</td>
    <td class="text-center bg-success">&check;</td>
    <td class="text-center bg-success">&check;</td>
    <td class="text-center bg-success">&check;</td>
    <td class="text-center bg-success">&check;</td>
    <td class="text-center bg-success">&check;</td>
    <td class="text-center bg-success">&check;</td>
    <td class="text-center bg-success">&check;</td>
    <td class="text-center bg-success">&check;</td>
    <td class="text-center bg-success">&check;</td>
    <td class="text-center bg-success">&check;</td>
  </tr>
  <tr>
    <td>Upsizing</td>
    <td class="text-center bg-success">&check;</td>
    <td class="text-center bg-success">&check;</td>
    <td class="text-center bg-success">&check;</td>
    <td class="text-center bg-success">&check;</td>
    <td class="text-center bg-success">&check;</td>
    <td class="text-center bg-success">&check;</td>
    <td class="text-center bg-success">&check;</td>
    <td class="text-center bg-success">&check;</td>
    <td class="text-center bg-success">&check;</td>
    <td class="text-center bg-success">&check;</td>
  </tr>
  <tr>
    <td>Size by whitelisted/confined width/height</td>
    <td class="text-center bg-success">&check;</td>
    <td class="text-center bg-success">&check;</td>
    <td class="text-center bg-success">&check;</td>
    <td class="text-center bg-success">&check;</td>
    <td class="text-center bg-success">&check;</td>
    <td class="text-center bg-success">&check;</td>
    <td class="text-center bg-success">&check;</td>
    <td class="text-center bg-success">&check;</td>
    <td class="text-center bg-success">&check;</td>
    <td class="text-center bg-success">&check;</td>
  </tr>
  <tr>
    <td>Size by forced/distorted width/height</td>
    <td class="text-center bg-success">&check;</td>
    <td class="text-center bg-success">&check;</td>
    <td class="text-center bg-success">&check;</td>
    <td class="text-center bg-success">&check;</td>
    <td class="text-center bg-success">&check;</td>
    <td class="text-center bg-success">&check;</td>
    <td class="text-center bg-success">&check;</td>
    <td class="text-center bg-success">&check;</td>
    <td class="text-center bg-success">&check;</td>
    <td class="text-center bg-success">&check;</td>
  </tr>
  <tr>
    <td>Size by height</td>
    <td class="text-center bg-success">&check;</td>
    <td class="text-center bg-success">&check;</td>
    <td class="text-center bg-success">&check;</td>
    <td class="text-center bg-success">&check;</td>
    <td class="text-center bg-success">&check;</td>
    <td class="text-center bg-success">&check;</td>
    <td class="text-center bg-success">&check;</td>
    <td class="text-center bg-success">&check;</td>
    <td class="text-center bg-success">&check;</td>
    <td class="text-center bg-success">&check;</td>
  </tr>
  <tr>
    <td>Size by width</td>
    <td class="text-center bg-success">&check;</td>
    <td class="text-center bg-success">&check;</td>
    <td class="text-center bg-success">&check;</td>
    <td class="text-center bg-success">&check;</td>
    <td class="text-center bg-success">&check;</td>
    <td class="text-center bg-success">&check;</td>
    <td class="text-center bg-success">&check;</td>
    <td class="text-center bg-success">&check;</td>
    <td class="text-center bg-success">&check;</td>
    <td class="text-center bg-success">&check;</td>
  </tr>
  <tr>
    <td>Size by percent</td>
    <td class="text-center bg-success">&check;</td>
    <td class="text-center bg-success">&check;</td>
    <td class="text-center bg-success">&check;</td>
    <td class="text-center bg-success">&check;</td>
    <td class="text-center bg-success">&check;</td>
    <td class="text-center bg-success">&check;</td>
    <td class="text-center bg-success">&check;</td>
    <td class="text-center bg-success">&check;</td>
    <td class="text-center bg-success">&check;</td>
    <td class="text-center bg-success">&check;</td>
  </tr>
  <tr>
    <td>Size by width/height</td>
    <td class="text-center bg-success">&check;</td>
    <td class="text-center bg-success">&check;</td>
    <td class="text-center bg-success">&check;</td>
    <td class="text-center bg-success">&check;</td>
    <td class="text-center bg-success">&check;</td>
    <td class="text-center bg-success">&check;</td>
    <td class="text-center bg-success">&check;</td>
    <td class="text-center bg-success">&check;</td>
    <td class="text-center bg-success">&check;</td>
    <td class="text-center bg-success">&check;</td>
  </tr>
  <tr>
    <td>Grayscale output</td>
    <td class="text-center bg-success">&check;</td>
    <td class="text-center bg-success">&check;</td>
    <td class="text-center bg-success">&check;</td>
    <td class="text-center bg-success">&check;</td>
    <td class="text-center bg-success">&check;</td>
    <td class="text-center bg-success">&check;</td>
    <td class="text-center bg-success">&check;</td>
    <td class="text-center bg-success">&check;</td>
    <td class="text-center bg-success">&check;</td>
    <td class="text-center bg-success">&check;</td>
  </tr>
  <tr>
    <td>Bitonal output</td>
    <td class="text-center bg-success">&check;</td>
    <td class="text-center bg-success">&check;</td>
    <td class="text-center bg-success">&check;</td>
    <td class="text-center bg-success">&check;</td>
    <td class="text-center bg-success">&check;</td>
    <td class="text-center bg-success">&check;</td>
    <td class="text-center bg-success">&check;</td>
    <td class="text-center bg-success">&check;</td>
    <td class="text-center bg-success">&check;</td>
    <td class="text-center bg-success">&check;</td>
  </tr>
  <tr>
    <td>String overlays</td>
    <td class="text-center bg-danger">&times;</td>
    <td class="text-center bg-danger">&times;</td>
    <td class="text-center bg-success">&check;</td>
    <td class="text-center bg-success">&check;</td>
    <td class="text-center bg-success">&check;</td>
    <td class="text-center bg-success">&check;</td>
    <td class="text-center bg-success">&check;</td>
    <td class="text-center bg-success">&check;</td>
    <td class="text-center bg-success">&check;</td>
    <td class="text-center bg-success">&check;</td>
  </tr>
  <tr>
    <td>Image overlays</td>
    <td class="text-center bg-danger">&times;</td>
    <td class="text-center bg-success">&check;</td>
    <td class="text-center bg-success">&check;</td>
    <td class="text-center bg-success">&check;</td>
    <td class="text-center bg-success">&check;</td>
    <td class="text-center bg-success">&check;</td>
    <td class="text-center bg-success">&check;</td>
    <td class="text-center bg-success">&check;</td>
    <td class="text-center bg-success">&check;</td>
    <td class="text-center bg-success">&check;</td>
  </tr>
  <tr>
    <td>Repeating image overlays</td>
    <td class="text-center bg-danger">&times;</td>
    <td class="text-center bg-danger">&times;</td>
    <td class="text-center bg-success">&check;</td>
    <td class="text-center bg-success">&check;</td>
    <td class="text-center bg-success">&check;</td>
    <td class="text-center bg-success">&check;</td>
    <td class="text-center bg-success">&check;</td>
    <td class="text-center bg-success">&check;</td>
    <td class="text-center bg-success">&check;</td>
    <td class="text-center bg-success">&check;</td>
  </tr>
  <tr>
    <td>Redaction</td>
    <td class="text-center bg-danger">&times;</td>
    <td class="text-center bg-danger">&times;</td>
    <td class="text-center bg-success">&check;</td>
    <td class="text-center bg-danger">&times;</td>
    <td class="text-center bg-success">&check;</td>
    <td class="text-center bg-success">&check;</td>
    <td class="text-center bg-success">&check;</td>
    <td class="text-center bg-success">&check;</td>
    <td class="text-center bg-success">&check;</td>
    <td class="text-center bg-success">&check;</td>
  </tr>
  <tr>
    <td>Tiled reading</td>
    <td class="text-center bg-danger">&times;</td>
    <td class="text-center bg-danger">&times;</td>
    <td class="text-center bg-success">&check;</td>
    <td class="text-center bg-success">&check;</td>
    <td class="text-center bg-success">&check;</td>
    <td class="text-center bg-success">&check;</td>
    <td class="text-center bg-success">&check;</td>
    <td class="text-center">N/A</td>
    <td class="text-center">N/A</td>
    <td class="text-center bg-danger">&times;</td>
  </tr>
  <tr>
    <td>Multiresolution reading</td>
    <td class="text-center bg-danger">&times;</td>
    <td class="text-center bg-danger">&times;</td>
    <td class="text-center bg-success">&check;</td>
    <td class="text-center bg-success">&check;</td>
    <td class="text-center bg-success">&check;</td>
    <td class="text-center bg-success">&check;</td>
    <td class="text-center bg-success">&check;</td>
    <td class="text-center">N/A</td>
    <td class="text-center">N/A</td>
    <td class="text-center">N/A</td>
  </tr>
  <tr>
    <td>Copying metadata into derivatives of same format</td>
    <td class="text-center bg-success">&check;</td>
    <td class="text-center bg-success">&check;</td>
    <td class="text-center bg-success">&check;</td>
    <td class="text-center bg-success">&check;</td>
    <td class="text-center bg-danger">&times;</td>
    <td class="text-center bg-danger">&times;</td>
    <td class="text-center bg-danger">&times;</td>
    <td class="text-center">N/A</td>
    <td class="text-center">N/A</td>
    <td class="text-center bg-danger">&times;</td>
  </tr>
  <tr>
    <td>ICC profiles</td>
    <td class="text-center bg-success">&check;*</td>
    <td class="text-center bg-success">&check;*</td>
    <td class="text-center bg-success">&check;*</td>
    <td class="text-center bg-success">&check;*</td>
    <td class="text-center bg-success">&check;*</td>
    <td class="text-center bg-success">&check;**</td>
    <td class="text-center bg-success">&check;**</td>
    <td class="text-center">N/A</td>
    <td class="text-center bg-danger">&times;</td>
    <td class="text-center bg-success">&check;**</td>
  </tr>
  <tr>
    <td>Awareness of EXIF Orientation tag</td>
    <td class="text-center bg-success">&check;</td>
    <td class="text-center bg-success">&check;</td>
    <td class="text-center bg-success">&check;</td>
    <td class="text-center bg-success">&check;</td>
    <td class="text-center bg-danger">&times;</td>
    <td class="text-center bg-danger">&times;</td>
    <td class="text-center bg-danger">&times;</td>
    <td class="text-center">N/A</td>
    <td class="text-center">N/A</td>
    <td class="text-center bg-danger">&times;</td>
  </tr>
  <tr>
    <td>Selectable resample filters</td>
    <td class="text-center bg-success">&check;</td>
    <td class="text-center bg-success">&check;</td>
    <td class="text-center bg-success">&check;</td>
    <td class="text-center bg-danger">&times;</td>
    <td class="text-center bg-success">&check;</td>
    <td class="text-center bg-danger">&times;</td>
    <td class="text-center bg-success">&check;</td>
    <td class="text-center bg-success">&check;</td>
    <td class="text-center bg-success">&check;</td>
    <td class="text-center bg-success">&check;</td>
  </tr>
  <tr>
    <td>Sharpening</td>
    <td class="text-center bg-success">&check;</td>
    <td class="text-center bg-success">&check;</td>
    <td class="text-center bg-success">&check;</td>
    <td class="text-center bg-success">&check;</td>
    <td class="text-center bg-success">&check;</td>
    <td class="text-center bg-success">&check;</td>
    <td class="text-center bg-success">&check;</td>
    <td class="text-center bg-success">&check;</td>
    <td class="text-center bg-success">&check;</td>
    <td class="text-center bg-success">&check;</td>
  </tr>
</table>

<p>&check;* Copied into derivative images.</p>
<p>&check;** Derivative image pixel data is modified according to the ICC profile.</p>

<hr>

<h2 id="Supported Source Formats">Supported Source Formats</h2>

<table class="table table-bordered">
  <tr>
    <th></th>
    <th><a href="#GraphicsMagickProcessor">GraphicsMagick</a></th>
    <th><a href="#ImageMagickProcessor">ImageMagick</a></th>
    <th><a href="#Java2dProcessor">Java2D</a></th>
    <th><a href="#JaiProcessor">JAI</a></th>
    <th><a href="#KakaduDemoProcessor">Kakadu Demo</a></th>
    <th><a href="#KakaduNativeProcessor">Kakadu Native</a></th>
    <th><a href="#OpenJpegProcessor">OpenJPEG</a></th>
    <th><a href="#PdfBoxProcessor">PDFBox</a></th>
    <th><a href="#TurboJpegProcessor">TurboJPEG</a></th>
  </tr>
  <tr>
    <td>BMP</td>
    <td class="text-center bg-success">&check;</td>
    <td class="text-center bg-success">&check;</td>
    <td class="text-center bg-success">&check;</td>
    <td class="text-center bg-success">&check;</td>
    <td class="text-center bg-danger">&times;</td>
    <td class="text-center bg-danger">&times;</td>
    <td class="text-center bg-danger">&times;</td>
    <td class="text-center bg-danger">&times;</td>
    <td class="text-center bg-danger">&times;</td>
  </tr>
  <tr>
    <td>GIF</td>
    <td class="text-center bg-warning">&check;<br>Animation not supported</td>
    <td class="text-center bg-warning">&check;<br>Animation not supported</td>
    <td class="text-center bg-success">&check;</td>
    <td class="text-center bg-danger">&times;</td>
    <td class="text-center bg-danger">&times;</td>
    <td class="text-center bg-danger">&times;</td>
    <td class="text-center bg-danger">&times;</td>
    <td class="text-center bg-danger">&times;</td>
    <td class="text-center bg-danger">&times;</td>
  </tr>
  <tr>
    <td>JPEG</td>
    <td class="text-center bg-success">&check;</td>
    <td class="text-center bg-success">&check;</td>
    <td class="text-center bg-success">&check;</td>
    <td class="text-center bg-warning">CMYK/YCCK not supported</td>
    <td class="text-center bg-danger">&times;</td>
    <td class="text-center bg-danger">&times;</td>
    <td class="text-center bg-danger">&times;</td>
    <td class="text-center bg-danger">&times;</td>
    <td class="text-center bg-success">&check;</td>
  </tr>
  <tr>
    <td>JPEG2000</td>
    <td class="bg-warning">Uses JasPer (requires plugin); no level-reduction or ROI decoding</td>
    <td class="bg-warning">Uses OpenJPEG (requires delegate); no level-reduction or ROI decoding</td>
    <td class="text-center bg-danger">&times;</td>
    <td class="text-center bg-danger">&times;</td>
    <td class="text-center bg-success">&check;</td>
    <td class="text-center bg-success">&check;</td>
    <td class="text-center bg-success">&check;</td>
    <td class="text-center bg-danger">&times;</td>
    <td class="text-center bg-danger">&times;</td>
  </tr>
  <tr>
    <td>PDF</td>
    <td class="bg-success">Requires plugin</td>
    <td class="bg-success">Requires delegate</td>
    <td class="text-center bg-danger">&times;</td>
    <td class="text-center bg-danger">&times;</td>
    <td class="text-center bg-danger">&times;</td>
    <td class="text-center bg-danger">&times;</td>
    <td class="text-center bg-danger">&times;</td>
    <td class="text-center bg-success">&check;</td>
    <td class="text-center bg-danger">&times;</td>
  </tr>
  <tr>
    <td>PNG</td>
    <td class="text-center bg-success">&check;</td>
    <td class="text-center bg-success">&check;</td>
    <td class="text-center bg-success">&check;</td>
    <td class="text-center bg-success">&check;</td>
    <td class="text-center bg-danger">&times;</td>
    <td class="text-center bg-danger">&times;</td>
    <td class="text-center bg-danger">&times;</td>
    <td class="text-center bg-danger">&times;</td>
    <td class="text-center bg-danger">&times;</td>
  </tr>
  <tr>
    <td>TIFF</td>
    <td class="bg-warning">No multi-resolution or ROI decoding</td>
    <td class="bg-warning">No multi-resolution or ROI decoding</td>
    <td class="text-center bg-success">&check;</td>
    <td class="text-center bg-success">&check;</td>
    <td class="text-center bg-danger">&times;</td>
    <td class="text-center bg-danger">&times;</td>
    <td class="text-center bg-danger">&times;</td>
    <td class="text-center bg-danger">&times;</td>
    <td class="text-center bg-danger">&times;</td>
  </tr>
  <tr>
    <td>WebP</td>
    <td class="bg-success">Requires plugin</td>
    <td class="bg-success">Requires delegate</td>
    <td class="text-center bg-danger">&times;</td>
    <td class="text-center bg-danger">&times;</td>
    <td class="text-center bg-danger">&times;</td>
    <td class="text-center bg-danger">&times;</td>
    <td class="text-center bg-danger">&times;</td>
    <td class="text-center bg-danger">&times;</td>
    <td class="text-center bg-danger">&times;</td>
  </tr>
</table>

<hr>

<h2 id="Implementations">Implementations</h2>

<h3 id="Java2dProcessor">Java2dProcessor</h3>

<p>Java2dProcessor uses the Java Image I/O and Java 2D libraries to read and process images in a native-Java way. It is a good all-around processor with no dependencies.</p>

<p>This processor has been written to exploit the Image I/O readers as efficiently as possible. Special attention has been paid to its handling of tiled images, such as tile-encoded TIFFs, for which it reads only the necessary tiles for a given request. It is also capable of reading the sub-images contained within pyramidal TIFF images.</p>

<h4>Image I/O Plugins</h4>

<p>By default, this processor uses the format-specific Image I/O plugins bundled with the JDK. Other plugins can be used instead by setting the <code>processor.imageio.{format}.reader</code> and/or <code>processor.imageio.{format}.writer</code> configuration keys to the fully-qualified class name of a plugin reader and writer, respectively. Alternative plugins could improve this processor's format support without requiring any changes to the application.</p>

<p>Recgonized plugins are logged at startup.</p>

<h4>Supported Sources</h4>

<p>This processor can read from files and streams. Seekable streams will be more efficient than sequential streams when working with pyramidal TIFF source images.</p>

<hr>

<h3 id="JaiProcessor">JaiProcessor</h3>

<p>Java Advanced Imaging (JAI) is a sophisticated image processing library developed by Sun Microsystems until the mid-2000s. It offers several advantages over Java 2D that make it ideal for an image server: a pull-based rendering pipeline that can reduce memory usage, and efficient region-of-interest decoding with some formats.</p>

<h4>Supported Sources</h4>

<p>This processor can read from files and streams. Seekable streams will be more efficient than sequential streams when working with pyramidal TIFF source images.</p>

<p class="text-warning">
  <i class="fa fa-warning"></i> Development on JAI ended a long time ago, and a <a href="https://github.com/medusa-project/cantaloupe/issues/176">minor incompatibility</a> has cropped up in Java 9. Given that supporting JAI is likely to become more problematic as time goes on, this processor should be considered deprecated, and it may be removed in a future release.
</p>

<div class="text-info">
  <p><i class="fa fa-info-circle"></i> When using this processor, it is normal to see the following log message:</p>
  <blockquote>Error: Could not find mediaLib accelerator wrapper classes. Continuing in pure Java mode.</blockquote>
  <p>This is harmless and expected when there is no mediaLib JAR on the classpath. Add the <code>-Dcom.sun.media.jai.disableMediaLib=true</code> VM option to suppress it.</p>
</div>

<hr>

<h3 id="GraphicsMagickProcessor">GraphicsMagickProcessor</h3>

<p>GraphicsMagickProcessor invokes the <a href="http://www.graphicsmagick.org">GraphicsMagick</a> executable
(<span class="filename">gm</span>). GraphicsMagick is not included and must be installed separately.</p>

<p>GraphicsMagick supports all of the IIIF transforms and most IIIF output formats (assuming the necessary libraries are installed; see <a href="http://www.graphicsmagick.org/formats.html">Supported Formats</a>).</p>

<p>GraphicsMagickProcessor is usually faster than <a href="#ImageMagickProcessor">ImageMagickProcessor</a>. However, like ImageMagickProcessor, it is neither tile- nor multi-resolution-aware and thus fares poorly with large images.</p>

<h4>Supported Sources</h4>

<p>This processor can read from files and sequential streams.</p>

<h4>Optional Arguments</h4>

<p>GraphicsMagickProcessor supports a <code>page</code> URL query argument (which is nonstandard and Cantaloupe-specific) which can be used to return a particular page of a PDF. For example:</p>

<pre>http://example.org/iiif/2/document.pdf/full/full/0/default.jpg?page=2</pre>

<p>If the <code>page</code> argument is missing, the first page will be returned.</p>

<hr>

<h3 id="ImageMagickProcessor">ImageMagickProcessor</h3>

<p>ImageMagickProcessor invokes <a href="http://www.imagemagick.org/">ImageMagick</a> commands&mdash;either <span class="filename">convert</span> and <span class="filename">identify</span> (version 6 and below) or <span class="filename">magick</span> (version 7+). (The version will be autodetected at startup.) ImageMagick is not included and must be installed separately.</p>

<p>ImageMagick supports all of the IIIF transforms and all IIIF output formats, assuming the necessary delegates are installed. It can also support a wide array of source formats.</p>

<p>ImageMagick offers excellent output quality at the expense of performance, which suffers increasingly as image size increases.</p>

<h4>Supported Sources</h4>

<p>This processor can read from files and sequential streams.</p>

<h4>Optional Arguments</h4>

<p>ImageMagickProcessor supports a <code>page</code> URL query argument (which is nonstandard and Cantaloupe-specific) which can be used to return a particular page of a PDF. For example:</p>

<pre>http://example.org/iiif/2/document.pdf/full/full/0/default.jpg?page=2</pre>

<p>If the <code>page</code> argument is missing, the first page will be returned.</p>

<hr>

<h3 id="TurboJpegProcessor">TurboJpegProcessor</h3>

<p>This processor uses the Java binding of the high-level TurboJPEG API on top of the <a href="https://libjpeg-turbo.org">libjpeg-turbo</a> library to read and write JPEG images. It uses the same image processing system as <a href="#Java2dProcessor">Java2dProcessor</a>.</p>

<p>The design of the TurboJPEG Java binding is somewhat unfortunate in that it requires JPEG image data to be buffered fully in memory before it can be read or written, which costs time and RAM. However, overall performance is still significantly better than Java2dProcessor thanks to the much faster coding performance of libjpeg-turbo compared to the Image I/O JPEG plugin.</p>

<p>libjpeg(-turbo) is also more lenient than Java2dProcessor when reading malformed JPEGs, JPEGs with mismatching color profiles, and so on.</p>

<p>This processor requires libjpeg-turbo 2.0.2 to be installed. Other 2.0.x versions may work, but are untested. <strong>libjpeg-turbo must be compiled with Java support</strong> (which it often isn't in OS package managers). As of version 2.0.2, this just involves adding the <code>-DWITH_JAVA=1</code> argument to the <code>cmake</code> command.</p>

<h4>

<hr>

<h3 id="KakaduDemoProcessor">KakaduDemoProcessor</h3>

<p class="text-info">
  <i class="fa fa-info-circle"></i> This processor was named KakaduProcessor in versions prior to 4.0, when it was the only way to use Kakadu. It was renamed in order to distinguish it from <a href="#KakaduNativeProcessor">KakaduNativeProcessor</a>.
</p>

<p class="text-warning">
  <i class="fa fa-warning"></i> As of version 4.1, this processor should be considered deprecated, and it may be removed in a future release.
</p>

<p><a href="http://kakadusoftware.com">Kakadu</a> is widely considered the fastest available general-purpose JPEG2000 codec. This processor uses Kakadu's <span class="filename">kdu_expand</span> demo application to decode JPEG2000 source images. All subsequent operations are performed using Java 2D.</p>

<p>The Kakadu demo binaries must be installed in order for this processor to work. These can be obtained from the <a href="http://kakadusoftware.com/downloads/">Kakadu website</a>. Alternatively, the <span class="filename">deps</span> folder of the download archive contains prebuilt binaries for several platforms. <span class="filename">kdu_expand</span> will be detected automatically if it is on the path; otherwise, set the <code>KakaduDemoProcessor.path_to_binaries</code> configuration key to the absolute path of the containing directory. The Kakadu shared library files will also need to be installed per the instructions in the <a href="#KakaduNativeProcessor">KakaduNativeProcessor</a> section.</p>

<h4>Supported Sources</h4>

<p>This processor can only read from files. For use with sources other than FilesystemSource, one of the <a href="#Retrieval%20Strategies">fallback retrieval strategies</a> must be used.</p>

<p class="text-info"><i class="fa fa-info-circle"></i> Kakadu is not free software. This processor may be used in only one of the following ways:</p>

<ol class="text-info">
  <li>For demonstration purposes, as detailed on the Kakadu website.</li>
  <li>For non-commercial purposes under the terms of the Kakadu Public Service license, as explained in the <a href="http://kakadusoftware.com/wp-content/uploads/2014/06/Kakadu-Licence-Terms-Feb-2018.pdf">Kakadu Software License Terms and Conditions</a> document.</li>
</ol>

<hr>

<h3 id="KakaduNativeProcessor">KakaduNativeProcessor</h3>

<p><a href="http://kakadusoftware.com">Kakadu</a> is a commercial JPEG2000 codec that is widely considered the fastest available general-purpose JP2 codec. In contrast to <a href="#KakaduDemoProcessor">KakaduDemoProcessor</a>, this processor calls directly into the Kakadu library to decode JPEG2000 source images, and because of that:</p>

<ul>
  <li>It doesn't need to invoke a process.</li>
  <li>It doesn't have to do intermediary format conversions.</li>
  <li>It can use the fast, high-quality interpolation offered by the Kakadu library for differential scaling.</li>
  <li>It can read from both FileSources and StreamSources.</li>
  <li>It respects <code>processor.metadata.preserve</code>.</li>
  <li>It works equally efficiently in Windows.</li>
  <li>It's significantly faster in general.</li>
</ul>

<h4>Supported Sources</h4>

<p>This processor can read from files and streams. Seekable streams will be more efficient than sequential streams.</p>

<h4>Configuration</h4>

<p>This processor must be able to locate the Kakadu JNI binding and shared library. The extracted release archive contains a folder named <span class="filename">deps</span>, which contains compiled binaries for several platforms. Copy the files from the platform-specific <span class="filename">lib</span> folder into one of the locations on the Java library path, which are logged at application startup in a message that looks like:</p>

<pre>
  [main] INFO  e.i.l.c.ApplicationContextListener - Java library path: .....
</pre>

<p>For Windows, you may also need to install <a href="https://www.visualstudio.com/downloads/">Microsoft Visual C++ Redistributable</a>, if it isn't already.</p>

<p class="text-info">
  <i class="fa fa-info-circle"></i> This processor was developed using a Kakadu Public Service License and may not be used commercially. See the <a href="http://kakadusoftware.com/wp-content/uploads/2014/06/Kakadu-Licence-Terms-Feb-2018.pdf">Kakadu Software License Terms and Conditions</a> for detailed terms.
</p>

<hr>

<h3 id="OpenJpegProcessor">OpenJpegProcessor</h3>

<p>OpenJpegProcessor uses the <span class="filename">opj_decompress</span> tool from the open-source
<a href="http://www.openjpeg.org">OpenJPEG</a> project to decode JPEG2000 source images. All other operations are performed using Java 2D, and basic image characteristics are acquired using custom code.</p>

<p>To use this processor, OpenJPEG must be installed. The OpenJPEG binaries will automatically be detected if they are on the path; otherwise, set the <code>OpenJpegProcessor.path_to_binaries</code> configuration key to the absolute path of the containing directory. The <code>LD_LIBRARY_PATH</code> environment variable will also need to be set to locate the OpenJPEG shared library.</p>

<h4>Supported Sources</h4>

<p>This processor can only read from files. For use with sources other than FilesystemSource, one of the <a href="#Retrieval%20Strategies">fallback retrieval strategies</a> must be used.</p>

<hr>

<h3 id="FfmpegProcessor">FfmpegProcessor</h3>

<p>FfmpegProcessor uses the <a href="http://www.ffmpeg.org">FFmpeg</a> tool to extract still frames from video files.</p>

<p>It has been tested with FFmpeg version 2.8. Other versions may or may not work.</p>

<p>FFmpeg is used only for frame extraction. All subsequent steps are handled by Java 2D.</p>

<h4>Supported Sources</h4>

<p>This processor can only read from files. For use with sources other than FilesystemSource, one of the <a href="#Retrieval%20Strategies">fallback retrieval strategies</a> must be used, which may be painful due to the large size of video files.</p>

<h4>Optional Arguments</h4>

<p>This processor supports a <code>time</code> URL query argument (which is nonstandard and Cantaloupe-specific) which can be used to return a frame at a particular second in the source video. The value of this argument should be in <code>HH:MM:SS</code> format, like:</p>

<pre>http://example.org/iiif/2/video.mp4/full/full/0/default.jpg?time=00:02:15</pre>

<p>If it's missing, the first frame will be returned.</p>

<hr>

<h3 id="PdfBoxProcessor">PdfBoxProcessor</h3>

<p>PdfBoxProcessor uses the <a href="https://pdfbox.apache.org">Apache PDFBox</a> library to read and rasterize PDF files. This is a pure-Java library that is bundled in and has no dependencies.</p>

<p>As PDF is a vector format, PdfBoxProcessor will convert to a raster (pixel) image and use a Java 2D pipeline to transform it according to the request arguments. The size of the base raster image, corresponding to a scale of 1, is configurable with the <code>processor.dpi</code> configuration option. When a request asks for a scale of &le; 50% or &ge; 200%, a fraction or multiple of this will be used, respectively, in order to improve efficiency at small scales, and detail at large scales.</p>

<h4>Supported Sources</h4>

<p>This processor can read similarly well from all sources.</p>

<h4>Optional Arguments</h4>

<p>PdfBoxProcessor supports a <code>page</code> URL query argument (which is nonstandard and Cantaloupe-specific) which can be used to return a particular page of a PDF. For example:</p>

<pre>http://example.org/iiif/2/document.pdf/full/full/0/default.jpg?page=2</pre>

<p>If the <code>page</code> argument is missing, the first page will be returned.</p>
